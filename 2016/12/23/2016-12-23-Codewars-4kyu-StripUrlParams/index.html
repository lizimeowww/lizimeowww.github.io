<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CodeWars - 4kyu - Strip Url Params · lizimeow's blog</title><meta name="description" content="CodeWars - 4kyu - Strip Url Params - lizimeow"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="lizimeow's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/lizimeow" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/lizimeow" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">CodeWars - 4kyu - Strip Url Params</h1><div class="post-info">2016年12月23日</div><div class="post-content"><p><a href="https://www.codewars.com/kata/strip-url-params/train/javascript" target="_blank" rel="external">题目</a></p>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description:"></a>Description:</h3><h5 id="Complete-the-method-so-that-it-does-the-following"><a href="#Complete-the-method-so-that-it-does-the-following" class="headerlink" title="Complete the method so that it does the following:"></a>Complete the method so that it does the following:</h5><ul>
<li>Removes any duplicate query string parameters from the url</li>
<li>Removes any query string parameters specified within the 2nd argument (optional array)</li>
</ul>
<h5 id="Examples"><a href="#Examples" class="headerlink" title="Examples:"></a>Examples:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">stripUrlParams(<span class="string">'www.codewars.com?a=1&amp;b=2&amp;a=2'</span>) <span class="comment">// returns 'www.codewars.com?a=1&amp;b=2'</span></div><div class="line">stripUrlParams(<span class="string">'www.codewars.com?a=1&amp;b=2&amp;a=2'</span>, [<span class="string">'b'</span>]) <span class="comment">// returns 'www.codewars.com?a=1'</span></div><div class="line">stripUrlParams(<span class="string">'www.codewars.com'</span>, [<span class="string">'b'</span>]) <span class="comment">// returns 'www.codewars.com'</span></div></pre></td></tr></table></figure>
<p>I coded 10+ lines but the best practices of all solutions is 2 lines… sad ….</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//my solution</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripUrlParams</span>(<span class="params">url, paramsToStrip</span>)</span>&#123;</div><div class="line">	<span class="keyword">let</span> params = url.substring(url.indexOf(<span class="string">"?"</span>)+<span class="number">1</span>)</div><div class="line">	<span class="keyword">let</span> k = []</div><div class="line">	<span class="keyword">let</span> j = params.split(<span class="string">"&amp;"</span>).filter(<span class="function">(<span class="params">v,i</span>)=&gt;</span>&#123;</div><div class="line">		<span class="keyword">let</span> tem = v.split(<span class="string">"="</span>)[<span class="number">0</span>]</div><div class="line">		<span class="keyword">if</span> (k.indexOf(tem)==<span class="number">-1</span> &amp;&amp; test(paramsToStrip,tem))&#123;</div><div class="line">			k.push(tem)</div><div class="line">			<span class="keyword">return</span> v</div><div class="line">		&#125;</div><div class="line">	&#125;)</div><div class="line">	<span class="keyword">return</span> url.substring(<span class="number">0</span>,url.indexOf(<span class="string">"?"</span>)+<span class="number">1</span>)+j.join(<span class="string">"&amp;"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> test = <span class="function">(<span class="params">arr,p</span>)=&gt;</span>&#123;</div><div class="line">	<span class="keyword">if</span>(arr==<span class="literal">undefined</span> || arr.length==<span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">	<span class="keyword">return</span> arr.indexOf(p)==<span class="number">-1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//best practices </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripUrlParams</span>(<span class="params">url, paramsToStrip</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> url.replace(<span class="regexp">/&amp;?([^?=]+)=.+?/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">m, p1, qPos</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> url.indexOf(p1 + <span class="string">'='</span>) &lt; qPos || (paramsToStrip||[]).indexOf(p1) &gt; <span class="number">-1</span> ? <span class="string">""</span>: m;</div><div class="line">   &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>get了一下replace的小trick..</p>
<p>该好好学学正则了<em>(:зゝ∠)</em>…</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/12/29/2016-12-29-Codewars-3kyu-MorseEncoding/" class="prev">PREV</a><a href="/2016/11/26/2016-11-26-hexo+GitHub pages+多说搭建博客/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'lizimeow';
var disqus_identifier = '2016/12/23/2016-12-23-Codewars-4kyu-StripUrlParams/';
var disqus_title = 'CodeWars - 4kyu - Strip Url Params';
var disqus_url = 'http://yoursite.com/2016/12/23/2016-12-23-Codewars-4kyu-StripUrlParams/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//lizimeow.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com">lizimeow</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>